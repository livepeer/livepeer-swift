// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

import Foundation

extension Shared {
    /// Status of the asset
    public struct AssetStatus {
        /// Phase of the asset
        public let phase: Shared.AssetPhase
        /// Timestamp (in milliseconds) at which the asset was last updated
        @DecimalSerialized
        public private(set) var updatedAt: Double
        /// Error message if the asset creation failed.
        public let errorMessage: String?
        /// Current progress of the task creating this asset.
        @DecimalSerialized
        public private(set) var progress: Double?

        /// Creates an object with the specified parameters
        ///
        /// - Parameter phase: Phase of the asset
        /// - Parameter updatedAt: Timestamp (in milliseconds) at which the asset was last updated
        /// - Parameter errorMessage: Error message if the asset creation failed.
        /// - Parameter progress: Current progress of the task creating this asset.
        ///
        public init(phase: Shared.AssetPhase, updatedAt: Double, errorMessage: String? = nil, progress: Double? = nil) {
            self.phase = phase
            self._updatedAt = DecimalSerialized<Double>(wrappedValue: updatedAt)
            self.errorMessage = errorMessage
            self._progress = DecimalSerialized<Double?>(wrappedValue: progress)
        }
    }
}

extension Shared.AssetStatus: Codable {
    enum CodingKeys: String, CodingKey {
        case phase
        case updatedAt
        case errorMessage
        case progress
    }

    public init(from decoder: Decoder) throws {
        let container = try decoder.container(keyedBy: CodingKeys.self)
        self.phase = try container.decode(Shared.AssetPhase.self, forKey: .phase)
        self._updatedAt = try container.decode(DecimalSerialized<Double>.self, forKey: .updatedAt)
        self.errorMessage = try container.decodeIfPresent(String.self, forKey: .errorMessage)
        self._progress = try container.decodeIfPresent(DecimalSerialized<Double?>.self, forKey: .progress) ?? DecimalSerialized<Double?>(wrappedValue: nil)
    }

    public func encode(to encoder: Encoder) throws {
        var container = encoder.container(keyedBy: CodingKeys.self)
        try container.encode(self.phase, forKey: .phase)
        try container.encode(self._updatedAt, forKey: .updatedAt)
        try container.encodeIfPresent(self.errorMessage, forKey: .errorMessage)
        if self.progress != nil {
            try container.encode(self._progress, forKey: .progress)
        }
    }
}

extension Shared.AssetStatus {
    var updatedAtWrapper: DecimalSerialized<Double> {
        return _updatedAt
    }
    var progressWrapper: DecimalSerialized<Double?> {
        return _progress
    }
}
